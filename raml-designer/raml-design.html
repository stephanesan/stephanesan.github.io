<!DOCTYPE html>
<html>
<html style="height: 100%">
    <title>RAML API Spec: Congo API For Drone Deliveries - Refactored</title>
    <link type="text/css" href="style.css" rel="stylesheet">
    <script type="text/javascript" src="scripts/jquery.min.js"></script>
    <script type="text/javascript" src="scripts/mosaic.1.0.1.js"></script>
    <script type="text/javascript" src="scripts/effects.js"></script>
</head>
<body style="height: 100%">

<textarea id="iframe-contents" style="display:none">

<!DOCTYPE html>
<html role="api-designer">
<head>
    <title>Designer</title>

    <!-- Inline these -->
    <link rel="stylesheet" href="styles/vendor.css">
    <link rel="stylesheet" href="styles/main.css"></head>
<body ng-app="ramlEditorApp">
<div class="container">
    <raml-editor></raml-editor>
</div><!-- /#content -->

<!-- Inline these -->
<script src="scripts/vendor.js"></script>
<script src="scripts/main.js"></script>

<script>
    angular.module('raml')
      .run(function (config) {
        config.set('fsFactory', 'memoryFileSystem');
      })
      .run(function (fileSystem, options) {
        options.readOnly = true;

        [].forEach.call(parent.document.getElementsByClassName('raml'), function (elt) {
            fileSystem.save('/' + elt.title, elt.textContent);
        });
      });
</script>

</textarea>

<script type="text/javascript">
    $(document).ready(function() {
        $.ajax({
            url : "https://api.github.com/repos/stephanesan/stephanesan.github.io/contents/raml-designer/raml",
            dataType: "text",
            success : function (jdata) {
                var data = JSON.parse(jdata);
                for(var i=0; i<data.length; i++) {
                    var name = data[i].name;
                    var input = document.createElement("textarea");
                    input.id = name;
                    input.style ='display:none';
                    input.class='raml'; 
                    input.title = name;
                    input.cols = "70";
                    input.rows = "20";
                    //document.getElementById("content").appendChild(input); 
                    $("#content").append(input); 
                    $.ajax({
                       url : "raml/"+name,
                       dataType: "text",
                       success : function (data) {
                           document.getElementById(name).value = data;
                       }
                    });
                }
            }
        });
    }); 
</script>
<div id="content"> </div>

<iframe id="iframe-container" srcx="frame.html" style="width: 100%; height: 100%; border: 0;"></iframe>
<script>
    var iDoc = document.getElementById("iframe-container").contentWindow.document;
    iDoc.open();
    iDoc.write(document.getElementById("iframe-contents").textContent) 
    iDoc.close();
</script>
<footer>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-53245569-1', 'auto');
        ga('send', 'pageview');

    </script>
    <!-- START: Marketo -->
    <script type="text/javascript">
        (function() {
            var didInit = false;
            function initMunchkin() {
                if(didInit === false) {
                    didInit = true;
                    Munchkin.init('564-SZS-136');
                }
            }
            var s = document.createElement('script');
            s.type = 'text/javascript';
            s.async = true;
            s.src = document.location.protocol + '//munchkin.marketo.net/munchkin.js';
            s.onreadystatechange = function() {
                if (this.readyState == 'complete' || this.readyState == 'loaded') {
                    initMunchkin();
                }
            };
            s.onload = initMunchkin;
            document.getElementsByTagName('head')[0].appendChild(s);
        })();
    </script>
    <!-- END: Marketo -->
</footer>
</body>
</html>
